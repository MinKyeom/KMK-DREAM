{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
    <link rel="stylesheet" href="{% static 'css/post_list_style.css' %}">
    <!-- 플랙서블 박스 아래 2줄 추가 후 작동되었다 -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0,minimum-scale=1,maximum-scale=1,user-scalable=no">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playball&display=swap');
        @import url('https://fonts.googleapis.com/css2?family=Kalam:wght@300;400;700&display=swap');
    </style>

</head>

<body>
    <header>
        <!-- 메뉴 드롭 다운 -->
        <label>
            <input id="check" type="checkbox" style="display:none;">
            <!-- 드롭 다운 메뉴 시작 포인트 제작 시작 -->
            <div id="menu">
                <!--드롭 다운 메뉴 닫는 버튼-->
                <div id="menu_close">
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
                        <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"/>
                    </svg>
                </div>

                <!-- 드롭 다운 메뉴 여는 버튼 -->
                <div id="menu_open">
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5"/>
                    </svg>
                </div>

                <!--드롭 다운 메뉴판 -->
                <div id="menu_board">
                    <ul>
                        <div id="in_menu">
                            <div id="menu_list"><strong>MENU</strong></div>
                        </div>

                        <li>
                            <a href="../">Home</a>
                        </li>

                        <li>
                            <a href="">Code_Ps</a>
                        </li>

                        <li>
                            <a href="https://github.com/minkyeom">GitHub</a>
                        </li>
                    </ul>
                </div>

            </div>
        </label>

        <div id="logo">
            <p id="playball-regular">Code_Ps</p>
        </div>

        <!-- search 메뉴판 제작-->
        <label>
            <input id="search_check" type="checkbox" style="display:none;">
            <div id="search_click">
                <div id="search_open">
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
                    </svg>
                </div>
                <div id="search_close">
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16">
                        <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"/>
                    </svg>
                </div>

                <!--검색 시스템 내부 구현-->
                <div id="search_menu">
                    <form method="GET">
                        <div id="search_text">
                            <div id="search_list">
                                <input type="text"  name="search">
                            </div>
                            <div id="search_button">
                                <button type="submit">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                        <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001q.044.06.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1 1 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0"/>
                                    </svg>
                                </button>
                            </div>
                    <!--class="search newbtn"-->
                        </div>
                    </form>
                </div>
            </div>
        </label>

        <!-- login 메뉴판 제작 가려지기 편하게-->
        <div id="login_check">
            {% if user %}
                <!-- 로그인이 된 경우 로그아웃 버튼으로 활성화-->
                <a  href="../../users/logout/">
                    <button>
                        <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="currentColor" class="bi bi-person-fill-dash" viewBox="0 0 16 16">
                            <path d="M12.5 16a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7M11 12h3a.5.5 0 0 1 0 1h-3a.5.5 0 0 1 0-1m0-7a3 3 0 1 1-6 0 3 3 0 0 1 6 0"/>
                            <path d="M2 13c0 1 1 1 1 1h5.256A4.5 4.5 0 0 1 8 12.5a4.5 4.5 0 0 1 1.544-3.393Q8.844 9.002 8 9c-5 0-6 3-6 4"/>
                        </svg>
                    </button>
                </a>
            {% else %}
            <!-- 로그인 안된 경우 로그아웃 아이콘 표시 -->
                <a  href="http://3.37.248.157/users/login/">
                    <button>
                        <svg xmlns="http://www.w3.org/2000/svg" width="35" height="35" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
                            <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6m2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0m4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4m-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10s-3.516.68-4.168 1.332c-.678.678-.83 1.418-.832 1.664z"/>
                        </svg>
                    </button>
                </a>
            {% endif %}

        </div>
    </header>

    <video src="{% static 'video/train.mp4' %}" muted autoplay loop>
    </video>

    <main>
        <div id="posts">
            <ul id="posts_list">
                {% for post in page_list %}
                    <li>
                        <!-- 전체 포스트를 묶음 -->
                        <div id="all_post">

                            <div id="all_content">
                                <div id="post_title"> <a href="/posts/{{ post.id }}"> <strong>{{ post.title }}</strong> </a> </div>
                                <div id="post_content">
                                    <div id="post_contents">
                                        {{ post.content }}
                                    </div>
                                </div>
                            </div>

                            <div id="post_img">
                                {% if post.thumbnail %}
                                    <img src="{{ post.thumbnail.url }}" alt="">
                                {% else %}
                                    <div id="no-img"></div>
                                {% endif %}
                            </div>
                        </div>
                        <!--
                        <div id="post_comments">
                            <ul>
                                {% for comment in post.comment_set.all %}
                                    <small><li>{{ comment.content }}</li></small>
                                {% empty %}
                                    <small><li>아직 댓글이 없습니다</li></small>
                                {% endfor %}
                            </ul>
                        </div>
                        -->
                    </li>
                {% empty %}
                    <li><strong>검색결과가 없습니다</strong></li>
                {% endfor %}

                <!-- 글 번호 영역 -->
                <div id="page_number">
                    <<
                    {% for page_number in page_list.paginator.page_range %}
                        {% if page_number >= page_list.number|add:-5 and page_number <= page_list.number|add:5 %}
                            {% if keyword is None %}
                                {% if page_number == page_list.number %}
                                    <a href="?search=&page={{page_number}}" style="color: orange;"><strong>{{page_number}}</strong></a>
                                {% else %}
                                    <a href="?search=&page={{page_number}}">{{page_number}}</a>
                                {% endif %}
                            {% else %}
                                {% if page_number == page_list.number %}
                                    <a href="?search={{keyword}}&page={{page_number}}" style="color: orange;"><strong>{{page_number}}</strong></a>
                                {% else %}
                                    <a href="?search={{keyword}}&page={{page_number}}">{{page_number}}</a>
                                {% endif %}
                            {% endif %}
                        {% endif %}
                    {% endfor %}
                        >>
                </div>
            </ul>
        </div>
    </main>

    <div id="post_add_check">
        {% if user %}
            <a href="http://3.37.248.157/posts/add">
                <button>
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor" class="bi bi-plus-lg" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2"/>
                    </svg>
                </button>
            </a>
        {% else %}
            <a href="http://3.37.248.157/users/login/">
                <button>
                    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" fill="currentColor" class="bi bi-plus-lg" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2"/>
                    </svg>
                </button>
            </a>
        {% endif %}
    </div>
</body>

</html>


<!-- grid 확인 -->

